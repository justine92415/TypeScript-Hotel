import{a as j,e as A,k as $}from"./chunk-YOHTOYWP.js";import{a as F,b as I,c as Q,d as G}from"./chunk-FM25JG7V.js";import{$a as f,Ia as O,Ja as m,Ka as S,Ma as R,N as g,Na as k,Oa as a,Pa as s,Qa as T,Sa as V,Ua as h,Va as p,X as C,Za as d,_a as E,aa as x,ba as w,bb as M,eb as P,kb as v,lb as _,mb as y,nb as D,ua as b,ya as c,za as u}from"./chunk-RQ5LHFRB.js";var q=["test"],z=["dropdown"];function W(t,n){if(t&1&&(a(0,"span",7),d(1),s()),t&2){let o=p(),e;c(1),f(" ",(e=o.currentOption())==null?null:e.label," ")}}function X(t,n){if(t&1&&(a(0,"span",8),d(1),s()),t&2){let o=p();c(1),f(" ",o.placeholder," ")}}var Y=(t,n)=>n.value;function B(t,n){if(t&1){let o=V();a(0,"li",11),h("click",function(){let r=x(o).$implicit,l=p(2);return w(l.selectOption(r))}),d(1),s()}if(t&2){let o=n.$implicit;c(1),E(o.label)}}function L(t,n){if(t&1&&(a(0,"div",9)(1,"ul",10),R(2,B,2,1,"li",12,Y),s()()),t&2){let o=p();c(2),k(o.options)}}var ne=(()=>{let n=class n{constructor(e,i){this.overlay=e,this.viewContainerRef=i,this.placeholder="\u8ACB\u9078\u64C7",this.options=[],this.controlValue=new A,this.currentOption=b(null),this.onTouched=()=>{},this.onChange=()=>{}}ngOnInit(){this.setDefaultValue(),this.formGroup.controls[this.name].valueChanges.subscribe(e=>{setTimeout(()=>{this.setDefaultValue()},0)})}setDefaultValue(){let e=this.formGroup.controls[this.name].value,i=this.options.find(r=>r.value===e);i?this.currentOption.set(i):this.currentOption.set(null)}openDropdown(){if(this.overlayRef&&this.overlayRef.hasAttached())this.overlayRef.detach();else{let e=this.overlay.position().flexibleConnectedTo(this.test.nativeElement).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]).withPush(!1),i=new I({positionStrategy:e,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.close(),maxWidth:this.test.nativeElement.offsetWidth,panelClass:"w-full"});this.overlayRef=this.overlay.create(i),this.overlayRef.attach(new F(this.dropdown,this.viewContainerRef)),this.overlayRef.backdropClick().subscribe(()=>{this.overlayRef.detach()})}}selectOption(e){this.currentOption.set(e),this.onChange(e.value),this.onTouched(),this.overlayRef.detach()}writeValue(e){this.controlValue.setValue(e.value)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}};n.\u0275fac=function(i){return new(i||n)(u(Q),u(O))},n.\u0275cmp=C({type:n,selectors:[["app-select"]],viewQuery:function(i,r){if(i&1&&(_(q,5),_(z,5)),i&2){let l;v(l=y())&&(r.test=l.first),v(l=y())&&(r.dropdown=l.first)}},inputs:{placeholder:"placeholder",options:"options",formGroup:"formGroup",name:"name"},standalone:!0,features:[M([{provide:j,useExisting:g(()=>n),multi:!0}]),P],decls:9,vars:1,consts:[[1,"relative"],[1,"w-full","bg-white","border","border-gray-300","rounded-md","shadow-sm",3,"click"],["test",""],[1,"relative","z-50","flex","items-center","justify-between","px-4","py-4"],["class","text-gray-700"],[1,"icon-ic_down"],["dropdown",""],[1,"text-gray-700"],[1,"text-gray-500"],[1,"w-full","bg-white","border","border-gray-300","rounded-md","shadow-sm"],[1,"overflow-auto","max-h-40"],[1,"px-4","py-2","hover:bg-gray-100","cursor-pointer",3,"click"],["class","px-4 py-2 hover:bg-gray-100 cursor-pointer"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"div",1,2),h("click",function(){return r.openDropdown()}),a(3,"div",3),m(4,W,2,1,"span",4)(5,X,2,1),T(6,"span",5),s(),m(7,L,4,0,"ng-template",null,6,D),s()()),i&2&&(c(4),S(4,r.currentOption()?4:5))},dependencies:[G,$],styles:["[_nghost-%COMP%]{display:block}.float-menu[_ngcontent-%COMP%]{position:fixed!important;right:15px;bottom:15px;z-index:2}.fab-menu-panel[_ngcontent-%COMP%]{border:1px solid black;background-color:#fff}.fab-menu-panel[_ngcontent-%COMP%]   .mat-nav-list[_ngcontent-%COMP%]{padding-top:0}"]});let t=n;return t})();export{ne as a};
